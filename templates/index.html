<!-- templates/index.html -->
{% extends 'base.html' %}

{% block title %}Главная - Автоматизация Поставок{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-5 fw-bold">Система Управления Поставками</h1>
    <p class="lead">Главный модуль для контроля склада и заказов в гостиничном комплексе</p>
</div>

<div class="row g-4 justify-content-center">
    
    <!-- Склад -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center p-4">
                <i class="bi bi-archive-fill icon-large text-info" style="font-size: 3rem;"></i>
                <h4 class="card-title fw-bold mt-3">Склад и Запасы</h4>
                <p class="card-text text-muted">Просмотр остатков продуктов и контроль сроков</p>
                <a href="{% url 'sklad' %}" class="btn btn-info w-100">Перейти к запасам</a>
            </div>
        </div>
    </div>

    <!-- Поставщики -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center p-4">
                <i class="bi bi-truck icon-large text-success" style="font-size: 3rem;"></i>
                <h4 class="card-title fw-bold mt-3">Управление Поставщиками</h4>
                <p class="card-text text-muted">Список контрагентов и их условия</p>
                {% if user.is_authenticated and user.groups.all.0.name in 'admin,manager' or user.is_superuser %}
                    <a href="{% url 'suppliers' %}" class="btn btn-success w-100">Список поставщиков</a>
                {% else %}
                    <button class="btn btn-secondary w-100" disabled>Требуется роль менеджера</button>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Поставки -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
            <div class="card-body text-center p-4">
                <i class="bi bi-basket icon-large text-warning" style="font-size: 3rem;"></i>
                <h4 class="card-title fw-bold mt-3">Оформить Приход</h4>
                <p class="card-text text-muted">Добавление новой партии продуктов на склад</p>
                {% if user.is_authenticated and user.groups.all.0.name in 'admin,manager' or user.is_superuser %}
                    <a href="{% url 'supply' %}" class="btn btn-warning w-100 text-dark">Принять поставку</a>
                {% else %}
                    <button class="btn btn-secondary w-100" disabled>Требуется роль менеджера</button>
                {% endif %}
            </div>
        </div>
    </div>

</div>

<!-- Статистика -->
<div class="row mt-5">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-light">
                <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Быстрая статистика</h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-4">
                        <h3>{{ total_products }}</h3>
                        <p class="text-muted">Всего товаров</p>
                    </div>
                    <div class="col-md-4">
                        <h3>{{ low_stock_count }}</h3>
                        <p class="text-muted">Товаров с низким запасом</p>
                    </div>
                    <div class="col-md-4">
                        <h3>{{ total_suppliers }}</h3>
                        <p class="text-muted">Поставщиков</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}